<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<h1>TTN 1.0 Backend</h1>
<h2>Introduction</h2>
<p>The TTN backend has changed in april 2016. The changes at&nbsp;first sight do not seem to be dramatic, but after working with the system for a few days you start to see some radical (and sometimes annoying) changes</p>
<ul>
  <li>The new system has split the backend function in several separate units: gateway, router, broker, handler.&nbsp;This allows the TTN system to be scalable in the future since these functions can be put on separate systems, in separate locations and will even allow user communities to start their own &quot;TTN&quot;-like services.<br />
    <br />
  </li>
  <li>The system now works &quot;dynamic&quot; by default. This means that whenever possible it expects nodes to join the network in a dynamic fashion: Nodes have no address by default only a DevUEI and an AppEUI and will ask for theri address at the moment of joining&nbsp;just like your computer systems do when joining a WiFi network.<br />
    There is a difference thought: Your wifi enabled systems nearly always have a keyboard and a display which enables configuration when joining. It enables the user to join a network of choice and deny services for other networks that are less secure or even dangerous to join.<br />
    <br />
  </li>
  <li>All these new functions require some more upfront design and actions from the application owner. After all, as nodes do not have display and keyboard we'll have to take these actions in advance before the node can be switched on. It also requires&nbsp;more actions on the back-end side (TTN) so administer these actions in a secure way.</li>
</ul>
<p>&nbsp;</p>
<h2>Login Process</h2>
<p>Using the TTN backend tools starts with making your own logon to use. So create a new user with your email address and choose a new password.</p>
<p><code>&gt; ttnctl user create &lt;your email&gt;<br />
 Password: ******</code></p>
<p>From this moment on you can login to ttnctl with teh command:</p>
<p><cite><samp>&gt; ttnctl user login &lt;your email&gt;</samp></cite></p>
<p>But in general this will not be necessary as the system will keep you logged on.</p>
<p>&nbsp;</p>
<h2>Creating an Application</h2>
<p>Now you have to create an application. You can have more than one application, but it is important to remember that the application that you will use to get messages from the TTN backend has to logon on MQTT as well.&nbsp;So if you create (too) many applications, you will have to start a MQTT connection and logon to every application separately in order to get its messages.</p>
<pre>&gt; ttnctl applications create 'Hello World App'</pre>
<p>From this moment on, you have to use the AppEui to refer to this application. You can find the AppEui with the command</p>
<p><code>&gt; ttnctl applications</code></p>
<p>And probably you like to make this the default application for as long as you are working with it, and&nbsp;register some devices to the application. To make this easy, use the following command</p>
<p><code>&gt; ttnctl applications use &lt;AppEui&gt;</code></p>
<p>Where the AppEui is the&nbsp;identification you found with the <code>'ttnctl applications'</code> command</p>
<p>&nbsp;</p>
<h2>Registering Devices</h2>
<p>Registering your devices is the last step in the process. Unlike the &quot;old&quot; TTN 0.0 and 0.1 environment you have to register your devices to the backend, even if you use personalized (=fixed) addresses. </p>
<p>&nbsp;</p>
<h2>Configuration</h2>
<p>The configuration of ttnctl and thus your own presence on the TTN backend is stored in a local file on your computer.</p>
<h2>Todo</h2>
<ul>
  <li>The output of the ttnctl command can not easily be scanned by your own scripts. Therefore it is not so easy to automate the process using scripting language.</li>
  <li>Such tools need a web interface. Strange that the TTN developers made a big statically linked shell executable for the administration.</li>
</ul>
</body>
</html>
