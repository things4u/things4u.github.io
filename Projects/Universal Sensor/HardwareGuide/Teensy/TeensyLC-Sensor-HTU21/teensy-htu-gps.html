<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Mini Node</title>
</head>

<body>
<h1>Teensy Temperature/Humidity Sensor with GPS</h1>
<p>Although there are now ways to get the full LMIC stack implemented in the ATmega 328 based MCU's, the GPS code is still to large to fit into that combinations. Therefore&nbsp;the TeensyLC has been selected as that platform more or less behaves equal to the other Arduinos yet has more program memory and&nbsp;RAM memory.</p>
<h2>Teensy LoRa</h2>
<p>So let's make our own mini node based on a cheap Arduino Pro-Mini MCU ($ 2.00 on Aliexpress), a HopeRF95, a HTU21d temperature/humidity sensor ($4.00) and some resistors. Based on the LoRaWAN software and library sketches it should be possible to make your own &quot;Thing&quot;. </p>
<p><img src="../../images/rfm95w-1.jpg" width="538" height="344" /></p>
<p>And the Arduino Pro-Mini looks like this. It's pin out is clearly marked on the outside of the board (that is, until I start to solder pin's to it). </p>
<p>The pin-out of a TeensyLC using the LMIC stack is documented on the forum.thethingsnetwork.org. Pin-out for use with an Teensy (Arduino IDE).</p>
<table width="65%" border="1">
  <tr>
    <th width="16%" scope="col">TeensyLC</th>
    <th width="13%" scope="col">Teensy Pin</th>
    <th width="16%" scope="col">RFM95</th>
    <th width="13%" scope="col">Color</th>
    <th width="42%" scope="col">Comment</th>
  </tr>
  <tr>
    <td><p>RX2</p></td>
    <td>9</td>
    <td>RESET</td>
    <td>--</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>VCC</td>
    <td>&nbsp;</td>
    <td>3.3V</td>
    <td>red</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>GND</td>
    <td>&nbsp;</td>
    <td>GND</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>D2</td>
    <td>2</td>
    <td>DIO0</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>D5</td>
    <td>5</td>
    <td>DIO1</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>D6</td>
    <td>6</td>
    <td>DIO2</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>3</td>
    <td>--</td>
    <td>&nbsp;</td>
    <td>DS18B20 data pin</td>
  </tr>
  <tr>
    <td>TX2</td>
    <td>10</td>
    <td>NSS</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>MOSI0</td>
    <td>11</td>
    <td>MOSI</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>MISO0</td>
    <td>12</td>
    <td>MISO</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>SCK0</td>
    <td>13</td>
    <td>SCK</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>As you can see in the picture of the Arduino ProMini below (actual boards might differ a bit) we need pins at both sides of the board so left of right orientation of the RFM95 is less important. </p>
<p>There are special adapter cards and boards available for tge RFM95w, but if we would wire&nbsp;and solder connections we need 10 wires.</p>
<h2>breadboard</h2>
<p>I soldered some jumpers (cut in half) to&nbsp;the RFM95 board to be able to test and experiment with the setup.</p>
<p>&nbsp;</p>
<p>I left enough wire to make connection to the breadboard simple. But it looks like **** and it did not take much time before I decided to cut the wires really short and solder them directly to an Arduino Pro-Mini.</p>
<p>&nbsp;</p>
<h2>Final Version</h2>
<p>&nbsp;</p>
<p>As you can see, it is possible to make a real small sensor. </p>
<h1>Wishlist</h1>
<p>If we would like to make a simple node that can report temperature and humidity and runs on normal batteries we need to do some special tings as well:</p>
<ul>
  <li>Connect an HTU21d sensor with SDA pin to A4 and SCL to A5, and connect VCC and GND.</li>
  <li>Make power reporting by using pin A0 as a reference sensor for battery power.</li>
  <li>Cut some traces on the Arduino Board in order to disable LED (and voltage regulator) so that teh unit is really low power.</li>
  <li>Change the skketch so that we can put the Arduino AND the RFM95 to sleep when necessary</li>
</ul>
<p><a href="../../../../../HardwareGuide/Arduino/Copy of Mini-Sensor-HTU21/mini-lowpower.html">Please read on Page 2 how to&nbsp;transform the node to a sensor</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
